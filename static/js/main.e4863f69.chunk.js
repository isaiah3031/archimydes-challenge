(this["webpackJsonparchimydes-challenge"]=this["webpackJsonparchimydes-challenge"]||[]).push([[0],{25:function(t,e,n){},37:function(t,e,n){},42:function(t,e,n){},43:function(t,e,n){},46:function(t,e,n){},47:function(t,e,n){},50:function(t,e,n){"use strict";n.r(e);var c=n(0),r=n.n(c),i=n(15),o=n.n(i),s=(n(37),n(11)),a=n(27),u=n(10),j=(n(42),n(3)),l="RECEIVE_CURRENT_USER",d="RECEIVE_STORY_LIST",b="RECEIVE_STORY",h=n(12),O=n.n(h),p=function(t){return function(e){(function(t){return O.a.ajax({contentType:"application/json",type:"POST",url:"http://localhost:3000/api/v1/signin",data:JSON.stringify(t)})})(t).then((function(t){return localStorage.setItem("user",JSON.stringify(t)),e(function(t){return{type:l,user:t}}(t))}))}},f=n(7),m=n(52),x=(n(43),n(1)),y=function(t){var e=t.loginUser,n=Object(j.f)(),r=Object(c.useState)(""),i=Object(f.a)(r,2),o=i[0],s=i[1],a=Object(c.useState)(""),u=Object(f.a)(a,2),l=u[0],d=u[1],b=Object(m.a)(!1),h=Object(f.a)(b,2),O=h[0],p=h[1];return Object(x.jsxs)("div",{className:"login_form",children:[Object(x.jsx)("h2",{children:O?"Admin Login":"User Login"}),Object(x.jsx)("input",{onChange:function(t){return s(t.target.value)},placeholder:"name",name:"email"}),Object(x.jsx)("input",{onChange:function(t){return d(t.target.value)},type:"password",placeholder:"password",name:"password"}),Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{onClick:function(){return p()},children:O?"Toggle to User":"Toggle To Admin"}),Object(x.jsx)("button",{onClick:function(){return e({email:o,password:l,isAdmin:O}),void(O?n.push("/"):n.push("/createStory"))},children:"Login"})]})]})},g=Object(s.b)(null,(function(t){return{loginUser:function(e){return t(p(e))}}}))(y),v=function(){var t=JSON.parse(localStorage.getItem("user"));return t&&t.token?{Authorization:"Bearer "+t.token}:{}},S=function(t){return{type:d,stories:t}},C=function(t){return{type:b,story:t}},T=function(){return function(t){return O.a.ajax({type:"GET",url:"http://localhost:3000/api/v1/stories",headers:v()}).then((function(e){return t(S(e))}))}},E=function(t){return function(e){return function(t){return O.a.ajax({contentType:"application/json",type:"POST",url:"http://localhost:3000/api/v1/stories",data:JSON.stringify(t),headers:v()})}(t).then((function(t){return e(S(t))}))}},N=function(t,e){return function(n){return function(t,e){return O.a.ajax({contentType:"application/json",type:"PUT",url:"http://localhost:3000/api/v1/stories/".concat(t,"/").concat(e),headers:v()})}(t,e).then((function(t){return n(C(t))}))}},w=function(t){return function(e){return function(t){return O.a.ajax({contentType:"application/json",type:"GET",url:"http://localhost:3000/api/v1/stories/".concat(t),headers:v()})}(t).then((function(t){return e(C(t))}))}},A=(n(25),function(t){var e=t.story,n=t.isAdmin,c=Object(j.f)(),r={id:e.id,summary:e.summary,description:e.description,type:e.type,complexity:e.complexity,estimatedHrs:e.estimatedHrs,cost:e.cost};try{return!!n&&Object(x.jsx)(x.Fragment,{children:Object.values(r).map((function(t){return Object(x.jsx)("td",{onClick:function(){n&&c.push("/story/".concat(e.id))},className:"".concat(void 0!==e.status&&n?"rejected"===e.status?"row-red":"row-green":""),children:t},Math.random(15))}))})}catch(i){return null}}),k=function(t,e){return t.id>e.id?1:t.id<e.id?-1:0},_=function(t,e){return I(t)>I(e)?1:I(t)<I(e)?-1:0},I=function(t){switch(t.complexity){case"mid":return 1;case"high":return 2;default:return 0}},L=function(t){var e=t.currentUser,n=t.stories,r=t.fetchStoryList;Object(c.useEffect)((function(){r()}),[]);Object(j.f)();var i=Object(c.useState)("id"),o=Object(f.a)(i,2),s=o[0],a=o[1];try{return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("h2",{children:"Story List"}),Object(x.jsxs)("table",{children:[Object(x.jsx)("thead",{children:Object(x.jsx)("tr",{children:["id","summary","description","type","complexity","estimatedHrs","cost"].map((function(t){return Object(x.jsx)("th",{onClick:function(){return function(t){if("id"!==t&&"complexity"!==t)return null;a(t)}(t)},className:"id"===t||"complexity"===t?"clickable":"",children:t})}))})}),Object(x.jsx)("tbody",{children:Object.values("complexity"===s?function(t){return t.sort(_)}(Object.values(n)):function(t){return t.sort(k)}(Object.values(n))).map((function(t){return Object(x.jsx)("tr",{children:Object(x.jsx)(A,{isAdmin:"Admin"===e.role,story:t})})}))})]})]})}catch(u){return null}},R=Object(s.b)((function(t){return{currentUser:t.session,stories:t.entities.stories}}),(function(t){return{fetchStoryList:function(){return t(T())}}}))(L),U=(n(46),function(t){var e=t.createStory,n=(t.isAdmin,Object(j.f)()),r=Object(c.useState)(""),i=Object(f.a)(r,2),o=i[0],s=i[1],a=Object(c.useState)(""),u=Object(f.a)(a,2),l=u[0],d=u[1],b=Object(c.useState)(""),h=Object(f.a)(b,2),O=h[0],p=h[1],m=Object(c.useState)(""),y=Object(f.a)(m,2),g=y[0],v=y[1],S=Object(c.useState)(""),C=Object(f.a)(S,2),T=(C[0],C[1],Object(c.useState)("")),E=Object(f.a)(T,2);E[0],E[1];return Object(x.jsxs)("div",{className:"story-form",children:[Object(x.jsx)("h2",{children:"Story Form"}),Object(x.jsx)("input",{placeholder:"Summary",name:"summary",onChange:function(t){return s(t.target.value)}}),Object(x.jsx)("textarea",{placeholder:"Description",name:"description",onChange:function(t){return d(t.target.value)}}),Object(x.jsxs)("select",{name:"type",onChange:function(t){return p(t.target.value)},children:[Object(x.jsx)("option",{selected:!0,disabled:!0,children:"Type"}),Object(x.jsx)("option",{value:"enhancement",children:"enhancement"}),Object(x.jsx)("option",{value:"bugfix",children:"bugfix"}),Object(x.jsx)("option",{value:"development",children:"development"}),Object(x.jsx)("option",{value:"qa",children:"QA"})]}),Object(x.jsxs)("select",{name:"complexity",onChange:function(t){return v(t.target.value)},children:[Object(x.jsx)("option",{selected:!0,disabled:!0,children:"Complexity"}),Object(x.jsx)("option",{value:"low",children:"Low"}),Object(x.jsx)("option",{value:"mid",children:"Mid"}),Object(x.jsx)("option",{value:"high",children:"High"})]}),Object(x.jsx)("button",{onClick:function(t){return function(t){t.preventDefault(),e({summary:o,description:l,type:O,complexity:g}).then((function(){return n.push("/")}))}(t)},children:"Submit"})]})}),F=Object(s.b)((function(t){return{isAdmin:"Admin"===t.session.role}}),(function(t){return{createStory:function(e){return t(E(e))}}}))(U),J=n(17),H=n(32),P=function(t){var e=t.component,n=Object(H.a)(t,["component"]);return Object(x.jsx)(j.b,Object(J.a)(Object(J.a)({},n),{},{render:function(t){return localStorage.getItem("user")?Object(x.jsx)(e,Object(J.a)({},t)):Object(x.jsx)(j.a,{to:{pathname:"/login",state:{from:t.location}}})}}))},D=(n(47),function(t,e){var n=t.story,r=t.fetchStory,i=t.editStory;Object(c.useEffect)((function(){r(o)}),[]);var o=Object(j.g)().id,s=Object(j.f)(),a=function(t){i(o,t.target.value).then((function(){return s.push("/")}))};try{return Object(x.jsxs)("div",{className:"story-detail",children:[Object(x.jsx)("h2",{children:"Admin Story View Page"}),Object(x.jsxs)("div",{className:"story-detail__contents",children:[Object(x.jsxs)("section",{className:"story-detail__text",children:[Object(x.jsx)("p",{children:n.summary}),Object(x.jsx)("p",{children:n.description})]}),Object(x.jsxs)("table",{children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"ID:"}),Object(x.jsx)("td",{children:n.id})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Complexity:"}),Object(x.jsx)("td",{children:n.type})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Cost:"}),Object(x.jsx)("td",{children:n.cost})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Est Hours:"}),Object(x.jsx)("td",{children:n.estimatedHrs})]})]})]}),Object(x.jsxs)("div",{className:"story-detail__btn-container",children:[Object(x.jsx)("button",{className:"red-btn",value:"rejected",onClick:function(t){return a(t)},children:"Reject"}),Object(x.jsx)("button",{className:"green-btn",value:"accepted",onClick:function(t){return a(t)},children:"Accept"})]})]})}catch(u){return null}}),M=Object(s.b)((function(t){return{isAdmin:t.session.isAdmin,story:t.entities.stories}}),(function(t){return{editStory:function(e,n){return t(N(e,n))},fetchStory:function(e){return t(w(e))}}}))(D),V=function(){return Object(x.jsxs)("div",{children:[Object(x.jsx)("button",{children:Object(x.jsx)(u.b,{to:"/login",children:"Login"})}),Object(x.jsx)(j.b,{exact:!0,path:"/login",component:g}),Object(x.jsx)(P,{exact:!0,path:"/createStory",component:F}),Object(x.jsx)(P,{exact:!0,path:"/",component:R}),Object(x.jsx)(P,{path:"/story/:id",component:M})]})},z=n(4),B=n(24),G=n(28),Y=n(29),q=n.n(Y),Q=JSON.parse(localStorage.getItem("user")),W=Q?{user:Q}:{},K=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,e=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(t),e.type){case l:return e.user;default:return t}},X=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(t),e.type){case d:return Object.assign({},t,e.stories);case b:return e.story;default:return t}},Z=Object(z.combineReducers)({stories:X}),$=Object(z.combineReducers)({session:K,entities:Z}),tt=n(30),et=n.n(tt),nt=n(31),ct={key:"root",storage:q.a},rt=Object(B.a)(ct,$),it=Object(z.createStore)(rt,Object(G.composeWithDevTools)(Object(z.applyMiddleware)(nt.a,et.a))),ot=Object(B.b)(it),st=function(){return Object(x.jsx)(s.a,{store:it,children:Object(x.jsx)(a.a,{persistor:ot,children:Object(x.jsx)(u.a,{children:Object(x.jsx)(V,{})})})})},at=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,53)).then((function(e){var n=e.getCLS,c=e.getFID,r=e.getFCP,i=e.getLCP,o=e.getTTFB;n(t),c(t),r(t),i(t),o(t)}))};o.a.render(Object(x.jsx)(r.a.StrictMode,{children:Object(x.jsx)(st,{store:it})}),document.getElementById("root")),at()}},[[50,1,2]]]);
//# sourceMappingURL=main.e4863f69.chunk.js.map